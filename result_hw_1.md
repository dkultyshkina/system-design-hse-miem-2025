#  Задание. Room With A View

A large hotel reservation company wants to build the next generation hotel reservation and management system specifically tailored to high-end resorts and spas where guests can view and reserve specific rooms.

Users: Guests (hundreds), hotel staff (less than 20)

Requirements:

* Registration can be made via web, mobile, phone call, or walk-in.

* Guests have the ability to either book a type of room (standard, deluxe, or suite) or choose a specific room to stay in by viewing pictures of each room and its location in the hotel.

* The system must be able to maintain room status (booked, available, ready to clean, etc.) as well as when the room will be needed next.

* It must also have state-of-the-art housekeeping management functionality so that cleaning and maintenance staff can be directed to various rooms based on priority and reservation need using proprietary devices supplied by the reservation company attached to the cleaning carts.

* Standard reservation functionality (e.g., payments, registration info, etc.) will be done by leveraging the existing reservations system.

* The system will be web-based and hosted by the reservation company.

Additional Context: 'Peak season is quickly approaching, so the system must be ready quickly or we have to wait until next year!'; Company is also investing heavily in cutting edge technology like smart room locks that open via a cell phone; Only interested in the high-end market; Sales people have tremendous clout in the organization; people often scramble to make their promises true

# Решение

## Сбор и анализ требований»:

### Отсев

Срыв сроков приведет к отсутствию системы на текущий пиковый сезон, что может привести:
- к финансовым потерям;
- отказу от совместной работы;
- репутационным рискам.

<br>

Успех можно измерить:
- операционной эффективностью (время, которое было затраченно от появления заявки на уборку до её окончания);
- удовлетворенностью гостей и персонала (например, оставленные отзывы);
- эффективность работы системы бронирования (например, по среднему временю бронирования, количество доведенных бронирований до конца).

<br>

Стандартные функции бронирования (например, платежи, информация о регистрации и т.д.) реализованы с использованием существующей системы бронирования.

<br>

Критические для MVP к пиковому сезону:

- выбор конкретного номера, его бронирование;
- интеграция с существующей платежной системой;
- управление статусами номеров;
- интерфейсы для персонала отеля (приложение для горничных, для администрации).

<br>

Дополнительные этапы:

- интеллектуальные замки;
- продвинутая аналитика для выявления потребности рынка высокого класса и загрузки отеля/спа-салона;
- кастомизация под продавцов.

<br>

Реалистичность:

- сложность создания системы в кратчайшие сроки, поэтому должна быть концентрация на основных функциях системы, требуется отложить реализацию некритических компонентов системы;
- могут возникнуть сложности при интеграции с существующими системами для стандартных функций бронирования, следует предусмотреть возможные проблемы и заложить дополнительное время для их решения;
- с учётом санкций следует выбирать инструменты, программные продукты, подходящие для нашего рынка (импортозамещенные, аналоги, продукты с открытой лицензией).


### Scope Refinement

- Пользователи: гости, персонал отеля.
- Регистрация через сайт, бронирование и ознакомление с номерами, сохранение статуса номера.
- Персоналу поступает информация по уборке и техническому обслуживанию через специальные устройства.
- Использование стандартный функций бронирования через существующие системы бронирования.
- Веб-формат системы.

<br>

Дополнительно: сжатые сроки, создание интеллектуальных замков для номеров, которые открываются с помощью мобильного телефона, рынок высого класса, продавцы с огромным влиянием в организации, выполнение обещаний.

<br>

### Функциональные требования

Акторы: гости, сотрудники отеля

<br>

Домены системы: 
- бронирование;
- гостевой сервис;
- операционный менеджмент;
- аналитика;
- поддержка текущей инфраструктуры.

<br>

Данные:
- пользователей;
- о бронировании;
- состоянии номеров/других помещений отеля;
- операционные.

<br>

Функции:

Для гостей:

1. Онлайн-выбор номера:

- просмотр фотографий каждого номера;
- просмотр расположения номеров в отеле;
- фильтрация поиска.

Для персонала:

1. Система управления уборкой:

- приоритетные задания;
- просмотр всех заданий;
- просмотр расположения заданий для горничных;
- подтверждение выполнения задания.

2. Учёт информации о номерах отеля:

- сохранение статуса номера;
- информация и даты бронирования номеров.

## Нефункциональные требования

1. Производительность:

- время отклика меньше 2 секунд для 95% запросов;
- поддержка 500 одновременных пользователей.

2. Маштабируемость

- горизонтальное маштабирование (использование балансироващика нагрузки);
- горизонтальный и вертикальный шардинг БД.

3. Отказоустойчивость

- использование балансировщика нагрузки;
- каждая критически важная часть системы должна работать (как минимум) на двух физически распределенных серверах;
- бэкапы транзакций каждые 10 минут, восстановление работы после сбоя должно быть меньше 30 минут.
- резерное копирование.

4. Безопасность

- двухэтапная аутентификация;
- защита от хакерских атак;
- шифрование данных гостей.

5. Мониторинг

- сбор метрик;
- логирование системы;
- своевременность реагирования на проблемы в системе.

6. Регулярные требования

- требования по обработке персональных данных (Федеральный закон "О персональных данных" от 27.07.2006 N 152-ФЗ), например, хранение на серверах на территории РФ, получение согласия на обработку от пользователей, использование СКЗИ;
- интеграция с ЕГИС "МИР" для учета гостей;
- требования к договорам бронирования, турестической деятельности (Федеральный закон "Об основах туристской деятельности в Российской Федерации" от 24.11.1996 N 132-ФЗ).

7. Переносимость и совместимость системы

С текущими сервисами бронирования.

8. Пользовательский опыт

- минимальное количество действий для выполнения функций (например, бронирования или ознакомления со списком задач для уборки);
- предпочтения пользователя в бронирования и рекомендации;
- скорость работы и единство дизайна;
- выполнение функций без багов для бронирования номера, взаимодействия с сервисами гостя или для выполнения трудовых обязательств.

## Ограничения

1. Бизнес-модель: B2B, B2C.
2. Основные бизнес-метрики и маштабирование:
- DAU/MAU: низкая активность у пользователей (бронируют редко, но могут долго выбирать), сотрудники - высокаая активность, так как работают ежедневно.
- Retention: 40% (персонализация, например, приведственные подарки, специальные условия для важных клиентов, профили для гостей, программы лояльности и удобство использования системы).
- ROI: окупаемость три года.
3. География пользователей: Россия.
4. Специфика домена: отельный бизнес (high-end рынок).
5. Типы устройств: для гостей - web, для персонала - устройства на тележках горничных.
6. Этап развития: MVP с базовым функционалом, затем доработки.
7. Тип развертывания: Cloud (с использованием решений от российских компаний, например, yandex)
8. Время разработки: жесткий дедлайн к пиковому сезону.
9. Технологии: 
- Криптография - для шифрования персональных данных;
- Облака российских компаний (например, яндекс, сбер, вк);
- API для умных замков (для дополнительной функции).
- Совместимость с legacy-системой бронирований (например, из-за этого может быть ограничен выбор стека, API и SLA).
- Использование open-source решений или решений российских компаний.

Например, язык программирования Golang для написания микросервисов, брокеры сообщений - RabbitMQ, реляционная база данных PostgreSQL, redis - для кэширования, React.js для веб, для маштабируемости - Kubernetes, для мониторинга - Prometheus и Grafana.

10. Существующие сервисы: стандартные функции бронирования - платежи, информация о регистрации и т. д.
11. SLA: работа системы критически важна в пиковый сезон, поддержка 24 часа в сутки для гостей и сотрудников (особенно, если вводить умные замки).
12. Регуляторные: 
- требования по обработке персональных данных (Федеральный закон "О персональных данных" от 27.07.2006 N 152-ФЗ), например, хранение на серверах на территории РФ, получение согласия на обработку от пользователей, использование СКЗИ;
- интеграция с ЕГИС "МИР" для учета гостей;
- требования к договорам бронирования, турестической деятельности (Федеральный закон "Об основах туристской деятельности в Российской Федерации" от 24.11.1996 N 132-ФЗ).
13. Интеграции: с текущими сервисами для проведения платежей, регистрации и т.д.
14. Санкции и импортозамещение: санкционные риски (с ограничениями на выбор ПО и оборудования) и соблюдение требований ФЗ по импортозамещению.

## Расчет нагрузки:

### Пользовательский трафик, сценарии использования, количество RPS

- Гости: 500 активных сессий.
- Персонал: 20 устройств.
- API-запросы: 300 RPM, в пиковые нагрузки до 5 RPS.

Лучше подготовить систему к обработке 500 RPM, использовать кэширование.

### Сетевой трафик и соединения

- Входящий трафик: 1 Gb/s (с запасом для пиков).
- Исходящий трафик: 100 Mb/s.
- Одновременных соединений: 5,000.

### БД

- 100 номеров;
- до 300 тысяч бронирований в год;
- 50 GB на хранение данных и 30GB на фото.

<br>

Пусть на одну заявку приходится максимум 1 MB памяти в БД с учетом возможных прикрепленных документов к заявке (например, фотографий неполадок). Если заявок в день максимум 1000, значит, а за один год - 360 тысяч и 360 GB. Хранение истории заявок в сжатом виде.
